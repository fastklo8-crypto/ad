import asyncio
from telegram import Bot
from telegram.error import TelegramError
import logging

# –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ª–æ–≥—É–≤–∞–Ω–Ω—è
logging.basicConfig(
    format='%(asctime)s - %(name)s - %(levelname)s - %(message)s',
    level=logging.INFO
)
logger = logging.getLogger(__name__)

# –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è
BOT_TOKEN = '8568797627:AAE8L71IRGsvER9LqcZ9eXTxNo3ZjKz92zU'  # –ó–∞–º—ñ–Ω–∏—Ç–∏ –Ω–∞ —Ç–æ–∫–µ–Ω –±–æ—Ç–∞
CHAT_ID = '@troesh'  # –ó–∞–º—ñ–Ω–∏—Ç–∏ –Ω–∞ ID –≥—Ä—É–ø–∏ –∞–±–æ –∫–∞–Ω–∞–ª—É (–Ω–∞–ø—Ä. @–Ω–∞–∑–≤–∞_–≥—Ä—É–ø–∏)

# –¢–µ–∫—Å—Ç –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
ADVERTISEMENT_TEXT = """üì¢ *–†–µ–∫–ª–∞–º–∞ –≤ –¢—Ä–æ—î—â–∏–Ω—ñ ‚Äî –ü—Ä–∞–π—Å-–ª–∏—Å—Ç*
üîù *–ó–∞–∫—Ä—ñ–ø–ª–µ–Ω–Ω—è –≤—ñ–¥ —ñ–º–µ–Ω—ñ —á–∞—Ç—É (–æ–≥–æ–ª–æ—à–µ–Ω–Ω—è –∑–≤–µ—Ä—Ö—É):*
‚Ä¢ –î–µ–Ω—å: 500 –≥—Ä–Ω. (–µ–∫–æ–Ω–æ–º—ñ—è 500 –≥—Ä–Ω)
‚Ä¢ –î–≤–∞ –¥–Ω—ñ: 1000 –≥—Ä–Ω. (–µ–∫–æ–Ω–æ–º—ñ—è 1000 –≥—Ä–Ω)
‚Ä¢ –¢—Ä–∏ –¥–Ω—ñ: 1500 –≥—Ä–Ω. (–µ–∫–æ–Ω–æ–º—ñ—è 1500 –≥—Ä–Ω)
‚Ä¢ –ü'—è—Ç—å –¥—ñ–±: 2250 –≥—Ä–Ω. (–µ–∫–æ–Ω–æ–º—ñ—è 2250 –≥—Ä–Ω)
*–†–µ–∫–ª–∞–º–Ω–∏–π –ø–æ—Å—Ç –±–µ–∑ –∑–∞–∫—Ä—ñ–ø–ª–µ–Ω–Ω—è (–∑–≤–∏—á–∞–π–Ω–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –≤ —Å—Ç—Ä—ñ—á—Ü—ñ):*
‚Ä¢ 1 –ø–æ—Å—Ç: 250 –≥—Ä–Ω.
‚Ä¢ 10 –ø–æ—Å—Ç—ñ–≤: 2250 –≥—Ä–Ω. (–µ–∫–æ–Ω–æ–º—ñ—è 250 –≥—Ä–Ω.)
‚Ä¢ 100 –ø–æ—Å—Ç—ñ–≤: 5000 –≥—Ä–Ω. (–µ–∫–æ–Ω–æ–º—ñ—è 20000 –≥—Ä–Ω.)
‚Ä¢ 1000 –ø–æ—Å—Ç—ñ–≤: 10000 –≥—Ä–Ω. (–µ–∫–æ–Ω–æ–º—ñ—è 240000 –≥—Ä–Ω.)
*–†–µ–∫–ª–∞–º–∞ –Ω–∞ –∞–≤–∞—Ç–∞—Ä—Ü—ñ —á–∞—Ç—É:*
‚Ä¢ 1 –º—ñ—Å—è—Ü—å: 5000 –≥—Ä–Ω.
–°—Ç–∞—Ç–∏ –≤–ª–∞—Å–Ω–∏–∫–æ–º: https://fragment.com/username/troesh 
üëâ *–î–ª—è –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è –ø–∏—à—ñ—Ç—å –∞–¥–º—ñ–Ω–∞–º* ‚ù§Ô∏è"""

async def post_message():
    """–§—É–Ω–∫—Ü—ñ—è –¥–ª—è –≤—ñ–¥–ø—Ä–∞–≤–∫–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è"""
    bot = Bot(token=BOT_TOKEN)
    try:
        await bot.send_message(
            chat_id=CHAT_ID,
            text=ADVERTISEMENT_TEXT,
            parse_mode='Markdown'
        )
        logger.info(f"–ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è —É—Å–ø—ñ—à–Ω–æ –≤—ñ–¥–ø—Ä–∞–≤–ª–µ–Ω–æ –¥–æ {CHAT_ID}")
    except TelegramError as e:
        logger.error(f"–ü–æ–º–∏–ª–∫–∞ –≤—ñ–¥–ø—Ä–∞–≤–∫–∏: {e}")

async def hourly_poster():
    """–ì–æ–ª–æ–≤–Ω–∞ —Ñ—É–Ω–∫—Ü—ñ—è –¥–ª—è —â–æ–≥–æ–¥–∏–Ω–Ω–æ–≥–æ –ø–æ—Å—Ç–∏–Ω–≥—É"""
    while True:
        await post_message()
        # –ß–µ–∫–∞—î–º–æ 7200 —Å–µ–∫—É–Ω–¥ (2 –≥–æ–¥–∏–Ω–∏)
        await asyncio.sleep(3600)

async def main():
    """–ó–∞–ø—É—Å–∫ –±–æ—Ç–∞"""
    logger.info("–ë–æ—Ç –∑–∞–ø—É—â–µ–Ω–æ. –ü–æ—á–∞—Ç–æ–∫ —â–æ–≥–æ–¥–∏–Ω–Ω–æ–≥–æ –ø–æ—Å—Ç–∏–Ω–≥—É...")
    await hourly_poster()

if __name__ == '__main__':
    try:
        asyncio.run(main())
    except KeyboardInterrupt:
        logger.info("–ë–æ—Ç –∑—É–ø–∏–Ω–µ–Ω–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–µ–º.")